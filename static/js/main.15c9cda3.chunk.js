(this["webpackJsonpawesome-albums"]=this["webpackJsonpawesome-albums"]||[]).push([[0],{35:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var r=c(1),s=c.n(r),i=c(27),n=c.n(i),a=c(8),l=(c(35),c(9)),o=Object(r.createContext)({filter:"",setFilter:function(e){return console.warn("no filter provider"+e)}}),u=function(){var e=Object(r.useContext)(o);if(!e)throw new Error("useSearchWord must be used within a CountProvider");return e},j=c(0),d=function(){var e=u(),t=e.filter,c=e.setFilter;return Object(j.jsxs)("div",{className:"field is-grouped",children:[Object(j.jsx)("p",{className:"control is-expanded",children:Object(j.jsx)("input",{className:"input is-info is-medium ",placeholder:"Search by artist, album, genre",type:"text",name:"filter",id:"filter",value:t,onChange:function(e){return c(e.currentTarget.value)}})}),Object(j.jsx)("p",{className:"control",children:Object(j.jsx)("input",{className:"button is-info is-light is-medium ",type:"button",name:"clear",id:"clear",value:"Clear",onClick:function(){return c("")}})})]})},b=c(30),m=function(){return Object(j.jsx)("header",{className:"bg-semi",children:Object(j.jsxs)("div",{className:"container pure-g",children:[Object(j.jsxs)("div",{className:"pure-u-1-1 pure-u-lg-3-5",children:[Object(j.jsx)("h1",{className:"logo",children:Object(j.jsxs)(a.b,{to:"/",children:["Awesome Albums ",Object(j.jsx)(b.a,{})]})}),Object(j.jsx)("p",{className:"subtitle is-4",children:"Find the Awesomest Albums"})]}),Object(j.jsx)("div",{className:"search-bar pure-u-1-1 pure-u-lg-1-3",children:Object(j.jsx)(d,{})})]})})},h=c(2),p=c(12),O=c(13),x=c(14),v=c.n(x),f=v.a.create({baseURL:"https://itunes.apple.com/us/rss/topalbums/",headers:{"Content-type":"application/json"}}),g=new(function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"getTopNAlbums",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return f.get("limit=".concat(e,"/json"))}}]),e}()),N=function(e){var t=e.album,c=e.image,r=e.getArtistID,s=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"overflow-hidden",children:Object(j.jsx)("img",{className:"pure-img album-card-img card-grow",src:c})}),Object(j.jsxs)("div",{className:"album-card-text",children:[Object(j.jsx)("p",{className:"title is-5",children:t["im:name"].label}),Object(j.jsx)("p",{className:"subtitle is-6",children:t["im:artist"].label})]})]});return Object(j.jsx)("div",{className:"pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4",children:r?Object(j.jsx)(a.b,{to:"/artist?id=".concat(r,"+").concat(t.id.attributes["im:id"]),children:s}):s})},w=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],i=u().filter;Object(r.useEffect)((function(){g.getTopNAlbums().then((function(e){var t=e.data.feed.entry;s(t)})).catch((function(e){console.error("Error fetching data: ".concat(e))}))}),[]);var n=null===c||void 0===c?void 0:c.filter((function(e){return"".concat(e.title.label," ").concat(e.category.attributes.label).toLowerCase().includes(i.toLowerCase())})),a=null===n||void 0===n?void 0:n.map((function(e){var t,c=e["im:image"][2].label.replace(/170x170/i,"380x380"),r=null===(t=e["im:artist"].attributes)||void 0===t?void 0:t.href;if(r){var s=r.match(/[0-9]+/);r=s?s[0]:void 0}return Object(j.jsx)(N,{album:e,image:c,getArtistID:r},e.id.attributes["im:id"])}));return Object(j.jsx)("div",{className:"pure-g bg-light",children:c?a:"Loading..."})},A=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"title is-3",children:"Top 100 iTunes"}),Object(j.jsx)(w,{})]})},y=c(29),k=c.n(y),C=v.a.create({baseURL:"https://cors-anywhere.herokuapp.com/https://itunes.apple.com/",headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*"}}),S=new(function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"getArtistAndAlbums",value:function(e){return C.get("lookup?id=".concat(e,"&entity=album"))}}]),e}());var T=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),c=t[0],s=t[1],i=Object(r.useState)(),n=Object(l.a)(i,2),a=n[0],o=n[1],u=new URLSearchParams(Object(h.f)().search).get("id"),d=null===u||void 0===u?void 0:u.split(" ")[0];null===u||void 0===u||u.split(" ")[1];Object(r.useEffect)((function(){S.getArtistAndAlbums(d).then((function(e){var t=e.data.results,c=t.filter((function(e){return"collection"===e.wrapperType})),r=t.find((function(e){return"artist"===e.wrapperType}));s(r),o(c)})).catch((function(e){console.error("Error fetching data: ".concat(e))}))}),[d]),console.log(a);var b=null===a||void 0===a?void 0:a.map((function(e){var t=e.artworkUrl100.replace(/100x100/i,"450x450"),c=new Date(e.releaseDate);return Object(j.jsxs)("div",{className:"pure-g artist-page-card",children:[Object(j.jsx)("div",{className:"pure-u-1-1 pure-u-md-1-2 pure-u-lg-1-3 text-align-center ",children:Object(j.jsx)("img",{src:t})}),Object(j.jsxs)("div",{className:"pure-u-1-1 pure-u-md-1-2 pure-u-lg-2-3 artist-page-content",children:[Object(j.jsx)("h5",{className:"title is-5",children:e.collectionName}),Object(j.jsxs)("p",{children:["$",e.collectionPrice]}),Object(j.jsxs)("p",{children:[e.primaryGenreName," ",e.collectionType]}),Object(j.jsxs)("p",{children:["Tracks: ",e.trackCount]}),Object(j.jsxs)("p",{children:["Explicit Content: ",e.collectionExplicitness]}),Object(j.jsxs)("p",{children:["Date Released: ",c.toLocaleDateString()]}),Object(j.jsx)("p",{className:"marg-bot-1",children:e.copyright}),Object(j.jsx)(k.a,{src:"rickrolled.mp3",controls:!0})]})]},e.collectionId)}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h5",{className:"subtitle is-5",children:"Additional Works by"}),Object(j.jsx)("h3",{className:"title is-3",children:null===c||void 0===c?void 0:c.artistName}),Object(j.jsx)("div",{children:b})]})},E=function(){return Object(j.jsx)("div",{children:Object(j.jsx)(T,{})})},L=function(){return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)(h.c,{children:[Object(j.jsx)(h.a,{path:"/",exact:!0,children:Object(j.jsx)(A,{})}),Object(j.jsx)(h.a,{path:"/artist",exact:!0,children:Object(j.jsx)(E,{})})]})})},D=function(){return Object(j.jsx)("footer",{className:"bg-dark",children:Object(j.jsx)("div",{className:"container",children:"\xa9 2021 Awesome Albums \u2014 All rights reserved."})})};var F=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),c=t[0],s=t[1];return console.log(c),Object(j.jsx)(o.Provider,{value:{filter:c,setFilter:s},children:Object(j.jsxs)("div",{className:"bg-whitish",children:[Object(j.jsx)(m,{}),Object(j.jsx)(L,{}),Object(j.jsx)(D,{})]})})};n.a.render(Object(j.jsx)(a.a,{children:Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(F,{})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.15c9cda3.chunk.js.map